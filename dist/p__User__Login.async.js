(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{JAxp:function(e,t,n){e.exports={login:"antd-pro-components-login-index-login",getCaptcha:"antd-pro-components-login-index-getCaptcha",icon:"antd-pro-components-login-index-icon",other:"antd-pro-components-login-index-other",register:"antd-pro-components-login-index-register",prefixIcon:"antd-pro-components-login-index-prefixIcon",submit:"antd-pro-components-login-index-submit"}},Y5yc:function(e,t,n){"use strict";n.r(t);n("+L6B");var a=n("2/Rp"),o=(n("5NDa"),n("5rEg")),r=(n("fOrg"),n("+KLJ")),i=n("d6i3"),s=n.n(i),c=n("1l/V"),l=n.n(c),u=n("eHn4"),p=n.n(u),m=n("p0pE"),d=n.n(m),h=n("2Taf"),g=n.n(h),f=n("vZ4D"),v=n.n(f),b=n("l4Ni"),y=n.n(b),C=n("ujKo"),x=n.n(C),E=n("MhPg"),S=n.n(E),w=n("q1tI"),k=n.n(w),I=n("MuoO"),T=n("Y2fQ"),P=(n("14J3"),n("BMrR")),N=(n("y8nQ"),n("Vl3Y")),O=(n("Znn+"),n("ZTPi")),M=(n("jCWc"),n("kPKH")),A=n("gWZ8"),G=n.n(A),U=(n("17x9"),n("TSYQ")),V=n.n(U),j=n("jehZ"),D=n.n(j),F=n("Y/ft"),L=n.n(F),z=n("BGR+"),q=n("JAxp"),B=n.n(q),J=(n("Pwec"),n("CtXQ")),K={UserName:{props:{size:"large",id:"userName",prefix:k.a.createElement(J["a"],{type:"user",className:B.a.prefixIcon}),placeholder:"admin"},rules:[{required:!0,message:"Please enter username!"}]},Password:{props:{size:"large",prefix:k.a.createElement(J["a"],{type:"lock",className:B.a.prefixIcon}),type:"password",id:"password",placeholder:"888888"},rules:[{required:!0,message:"Please enter password!"}]},Mobile:{props:{size:"large",prefix:k.a.createElement(J["a"],{type:"mobile",className:B.a.prefixIcon}),placeholder:"mobile number"},rules:[{required:!0,message:"Please enter mobile number!"},{pattern:/^1\d{10}$/,message:"Wrong mobile number format!"}]},Captcha:{props:{size:"large",prefix:k.a.createElement(J["a"],{type:"mail",className:B.a.prefixIcon}),placeholder:"captcha"},rules:[{required:!0,message:"Please enter Captcha!"}]}},Z=Object(w["createContext"])(),R=Z,Q=N["a"].Item,Y=function(e){function t(e){var n;return g()(this,t),n=y()(this,x()(t).call(this,e)),n.onGetCaptcha=function(){var e=n.props.onGetCaptcha,t=e?e():null;!1!==t&&(t instanceof Promise?t.then(n.runGetCaptchaCountDown):n.runGetCaptchaCountDown())},n.getFormItemOptions=function(e){var t=e.onChange,n=e.defaultValue,a=e.customprops,o=e.rules,r={rules:o||a.rules};return t&&(r.onChange=t),n&&(r.initialValue=n),r},n.runGetCaptchaCountDown=function(){var e=n.props.countDown,t=e||59;n.setState({count:t}),n.interval=setInterval(function(){t-=1,n.setState({count:t}),0===t&&clearInterval(n.interval)},1e3)},n.state={count:0},n}return S()(t,e),v()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.updateActive,n=e.name;t&&t(n)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.state.count,t=this.props.form.getFieldDecorator,n=this.props,r=(n.onChange,n.customprops),i=(n.defaultValue,n.rules,n.name),s=n.getCaptchaButtonText,c=n.getCaptchaSecondText,l=(n.updateActive,n.type),u=L()(n,["onChange","customprops","defaultValue","rules","name","getCaptchaButtonText","getCaptchaSecondText","updateActive","type"]),p=this.getFormItemOptions(this.props),m=u||{};if("Captcha"===l){var d=Object(z["a"])(m,["onGetCaptcha","countDown"]);return k.a.createElement(Q,null,k.a.createElement(P["a"],{gutter:8},k.a.createElement(M["a"],{span:16},t(i,p)(k.a.createElement(o["a"],D()({},r,d)))),k.a.createElement(M["a"],{span:8},k.a.createElement(a["a"],{disabled:e,className:B.a.getCaptcha,size:"large",onClick:this.onGetCaptcha},e?"".concat(e," ").concat(c):s))))}return k.a.createElement(Q,null,t(i,p)(k.a.createElement(o["a"],D()({},r,m))))}}]),t}(w["Component"]);Y.defaultProps={getCaptchaButtonText:"captcha",getCaptchaSecondText:"second"};var H={};Object.keys(K).forEach(function(e){var t=K[e];H[e]=function(n){return k.a.createElement(R.Consumer,null,function(a){return k.a.createElement(Y,D()({customprops:t.props,rules:t.rules},n,{type:e,updateActive:a.updateActive,form:a.form}))})}});var W=H,_=O["a"].TabPane,X=function(){var e=0;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e+=1,"".concat(t).concat(e)}}(),$=function(e){function t(e){var n;return g()(this,t),n=y()(this,x()(t).call(this,e)),n.uniqueId=X("login-tab-"),n}return S()(t,e),v()(t,[{key:"componentDidMount",value:function(){var e=this.props.tabUtil;e.addTab(this.uniqueId)}},{key:"render",value:function(){var e=this.props.children;return k.a.createElement(_,this.props,e)}}]),t}(w["Component"]),ee=function(e){return k.a.createElement(R.Consumer,null,function(t){return k.a.createElement($,D()({tabUtil:t.tabUtil},e))})};ee.typeName="LoginTab";var te=ee,ne=N["a"].Item,ae=function(e){var t=e.className,n=L()(e,["className"]),o=V()(B.a.submit,t);return k.a.createElement(ne,null,k.a.createElement(a["a"],D()({size:"large",className:o,type:"primary",htmlType:"submit"},n)))},oe=ae,re=n("vEYl"),ie=n.n(re),se=function(e){function t(e){var n;return g()(this,t),n=y()(this,x()(t).call(this,e)),n.onSwitch=function(e){n.setState({type:e});var t=n.props.onTabChange;t(e)},n.getContext=function(){var e=n.state.tabs,t=n.props.form;return{tabUtil:{addTab:function(t){n.setState({tabs:[].concat(G()(e),[t])})},removeTab:function(t){n.setState({tabs:e.filter(function(e){return e!==t})})}},form:t,updateActive:function(e){var t=n.state,a=t.type,o=t.active;o[a]?o[a].push(e):o[a]=[e],n.setState({active:o})}}},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a=t.active,o=t.type,r=n.props,i=r.form,s=r.onSubmit,c=a[o];i.validateFields(c,{force:!0},function(e,t){s(e,t)})},n.state={type:e.defaultActiveKey,tabs:[],active:{}},n}return S()(t,e),v()(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,a=this.state,o=a.type,r=a.tabs,i=[],s=[];return k.a.Children.forEach(n,function(e){e&&("LoginTab"===e.type.typeName?i.push(e):s.push(e))}),k.a.createElement(P["a"],null,k.a.createElement(M["a"],{xl:12,lg:12,md:24,sm:24,xs:24},k.a.createElement("div",{style:{height:"55vh",width:"100%",backgroundColor:"#f9f9f9",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundBlendMode:"normal",borderRadius:"5px 0 0 5px",position:"relative",backgroundImage:"url(".concat(ie.a,")")}})),k.a.createElement(M["a"],{xl:12,lg:12,md:24,sm:24,xs:24},k.a.createElement(R.Provider,{value:this.getContext()},k.a.createElement("div",{className:V()(t,B.a.login)},k.a.createElement(N["a"],{style:{width:"100%"},onSubmit:this.handleSubmit},r.length?k.a.createElement(k.a.Fragment,null,k.a.createElement(O["a"],{animated:!1,className:B.a.tabs,activeKey:o,onChange:this.onSwitch},i),s):n)))))}}]),t}(w["Component"]);se.defaultProps={className:"",defaultActiveKey:"",onTabChange:function(){},onSubmit:function(){}},se.Tab=te,se.Submit=oe,Object.keys(W).forEach(function(e){se[e]=W[e]});var ce,le,ue,pe=N["a"].create()(se),me=n("w2qy"),de=n.n(me),he=n("v4IS"),ge=n("ydnR"),fe=(n("n7VS"),n("Sp1i")),ve=n.n(fe),be=pe.Tab,ye=(pe.UserName,pe.Password,pe.Mobile),Ce=(pe.Captcha,pe.Submit,ce=Object(I["connect"])(function(e){var t=e.login,n=e.loading;return{login:t,submitting:n.effects["login/login"]}}),ce((ue=function(e){function t(e){var n;return g()(this,t),n=y()(this,x()(t).call(this,e)),n.onTabChange=function(e){n.setState({type:e})},n.onGetCaptcha=function(){return new Promise(function(e,t){n.loginForm.validateFields(["mobile"],{},function(a,o){if(a)t(a);else{var r=n.props.dispatch;r({type:"login/getCaptcha",payload:o.mobile}).then(e).catch(t)}})})},n.handleSubmit=function(e,t){var a=n.state.type;if(!e){var o=n.props.dispatch;o({type:"login/login",payload:d()({},t,{type:a})})}},n.changeAutoLogin=function(e){n.setState({autoLogin:e.target.checked})},n.handleChange=function(e,t){n.setState({mobileValidation:""}),n.setState(p()({},e.target.id,e.target.value))},n.sentOtp=l()(s.a.mark(function e(){var t,a,o;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t="+91"+n.state.mobile,!(n.state.mobile.length>=10)){e.next=14;break}return e.prev=2,a={accessKeyId:"AKIATUPTMLPP37TGUMEZ",secretAccessKey:"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",region:"ap-south-1",sessionToken:null,userPoolId:"ap-south-1_p7Jz6LG3T"},ve.a.config.correctClockSkew=!0,ve.a.config.update(a),o=new ve.a.CognitoIdentityServiceProvider({apiVersion:"2016-04-18"}),e.next=9,o.listUsersInGroup({GroupName:"admin",UserPoolId:"ap-south-1_p7Jz6LG3T"},function(e,a){var o=[];a.Users.map(function(e){e.Attributes.map(function(e){"phone_number"==e.Name&&o.push(e.Value)})}),o.some(function(e){return t===e})?he["a"].signIn(t).then(function(e){n.setState({isotp:!0,user:e})}):n.setState({mobileValidation:"Invalid Phone Number"})});case 9:e.sent,e.next=14;break;case 12:e.prev=12,e.t0=e["catch"](2);case 14:case"end":return e.stop()}},e,null,[[2,12]])})),n.verifyOtp=l()(s.a.mark(function e(){var t,a,o;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=n.state.otp,a=n.state.user,e.next=4,he["a"].sendCustomChallengeAnswer(a,t);case 4:o=e.sent,o&&(localStorage.setItem(ge["a"],o.Session),n.props.history.push({pathname:"/dashboardlite",state:{detail:o.Session}})),o.signInUserSession;case 7:case"end":return e.stop()}},e)})),n.renderMessage=function(e){return k.a.createElement(r["a"],{style:{marginBottom:24},message:e,type:"error",showIcon:!0})},n.state={type:"account",autoLogin:!0,mobile:"",otp:"123456",isotp:!1,user:null,detail:null,phoneList:[],mobileValidation:""},n}return S()(t,e),v()(t,[{key:"componentDidMount",value:function(){he["a"].currentAuthenticatedUser().then(function(e){}).catch(function(e){console.log(e,"oooooooo")})}},{key:"render",value:function(){var e=this,t=this.props,n=t.login,r=t.submitting,i=this.state,s=i.type;i.autoLogin;return k.a.createElement("div",{className:de.a.main},k.a.createElement(pe,{defaultActiveKey:s,onTabChange:this.onTabChange,onSubmit:this.handleSubmit,ref:function(t){e.loginForm=t}},k.a.createElement(be,{key:"account",tab:Object(T["formatMessage"])({id:"app.login.tab-login-mobile"})},"error"===n.status&&"mobile"===n.type&&!r&&this.renderMessage(Object(T["formatMessage"])({id:"app.login.message-invalid-verification-code"})),this.state.isotp?k.a.createElement(o["a"],{name:"otp",onChange:this.handleChange,placeholder:Object(T["formatMessage"])({id:"OTP"}),style:{marginBottom:35}}):k.a.createElement("div",null,k.a.createElement(ye,{name:"mobile",onChange:this.handleChange,placeholder:Object(T["formatMessage"])({id:"form.phone-number.placeholder"}),rules:[{required:!0,message:Object(T["formatMessage"])({id:"validation.phone-number.required"})}]}),k.a.createElement("p",{style:{color:"#FF0000"}},this.state.mobileValidation))),this.state.isotp?k.a.createElement(a["a"],{type:"primary",size:"large",styles:{marginBottom:"30px"},block:!0,onClick:this.verifyOtp},k.a.createElement(T["FormattedMessage"],{id:"Verify"})):k.a.createElement(a["a"],{type:"primary",size:"large",styles:{marginBottom:"30px"},block:!0,onClick:this.sentOtp},k.a.createElement(T["FormattedMessage"],{id:"Send OTP"}))))}}]),t}(w["Component"]),le=ue))||le);t["default"]=Ce},n7VS:function(e,t,n){"use strict";var a=n("Sp1i"),o=new a.CognitoIdentityServiceProvider({apiVersion:"2016-04-18"}),r="<admin app client id>",i="super-admins";function s(e,t){return!e&&t.Groups.map(function(e){return e.GroupName}).indexOf(i)>=0}e.exports.handler=function(e,t,n){var a=e.callerContext.clientId;a===r?o.adminListGroupsForUser({UserPoolId:e.userPoolId,Username:e.userName},function(t,a){s(t,a)?n(null,e):n(new Error("Access denied"),e)}):n(null,e)}},w2qy:function(e,t,n){e.exports={main:"antd-pro-pages-user-login-main",icon:"antd-pro-pages-user-login-icon",other:"antd-pro-pages-user-login-other",register:"antd-pro-pages-user-login-register"}}}]);